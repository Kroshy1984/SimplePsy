<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="initial-scale=1, width=device-width" />

    <link rel="stylesheet" type="text/css" th:href="@{/css/new-front/global.css}" />
    <link rel="stylesheet" type="text/css" th:href="@{/css/new-front/test/customers-tests-list.css}" />
    <link
            rel="stylesheet"
            href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700;900&display=swap"
    />
    <link
            rel="stylesheet"
            href="https://fonts.googleapis.com/css2?family=Rubik:wght@400&display=swap"
    />
</head>
<body>
<style>
    .component-191 ul {
        list-style: none;
        padding: 0;
        margin: 0;
    }

    .component-191 li {
        margin-bottom: 20px;
    }
    .oprosnik {
        position: relative;
        font-size: var(--bold-16-size);
        line-height: 18px;
        font-weight: 700;
        font-family: var(--bold-10);
        color: #5C80FF;
        text-align: center;
        z-index: 1;
    }
    .scoring-item {
        background-color: #f7f7f7;
        padding: 20px;
        border: 1px solid #ddd;
        border-radius: 10px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    }

    .scoring-type {
        font-weight: bold;
        font-size: 18px;
        margin-bottom: 10px;
    }

    .buttons {
        display: flex;
        justify-content: space-between;
        margin-top: 20px;
    }

    .button-type {
        background-color: #4CAF50;
        color: #fff;
        padding: 10px 20px;
        border: none;
        border-radius: 10px;
        cursor: pointer;
    }

    .button-type:hover {
        background-color: #3e8e41;
    }

    .button {
        background-color: #4CAF50;
        color: #fff;
        padding: 10px 20px;
        border: none;
        border-radius: 10px;
        cursor: pointer;
    }

    .button:hover {
        background-color: #3e8e41;
    }
</style>
<div class="div189">
    <div class="settings4"></div>
    <section class="frame-parent108">
        <div class="navigation-left-parent">
            <div class="navigation-left">
                <div class="navigation-menu1">
                    <div class="navigation-items2">
                        <div class="frame-parent109">
                            <div class="icon-parent26">
                                <img
                                        class="icon134"
                                        loading="lazy"
                                        alt=""
                                        src="/images/icon@2x.png"
                                />

                                <a class="constructor10">Понятная практика</a>
                            </div>
                            <div class="navigation-right">
                                <div class="wrapper-user-parent1">
                                    <div class="wrapper-user10">
                                        <img
                                                class="user-icon10"
                                                loading="lazy"
                                                alt=""
                                                src="/images/user@2x.png"
                                                id="userImage"
                                        />
                                    </div>
                                    <div class="user-info1">
                                        <div class="user-name2">
                                            <b class="hello-rosalie10">Привет, Антон!</b>
                                        </div>
                                        <b class="rosaliericegmailc10">
                                            <p class="ponyatpractikagmailcom6">
                                                ponyatpractika@gmail.com
                                            </p>
                                        </b>
                                    </div>
                                </div>
                            </div>
                            <div class="frame-wrapper73">
                                <div class="frame-parent122">
                                    <div class="frame-parent123">
                                        <div class="client-list-wrapper">
                                            <button class="base90" onclick="window.location.href='/SimplePsy/V1/specialist/customers';"></button>
                                            <div class="icon-wrapper33">
                                                <img class="icon146" alt="" src="/images/icon-3@2x.png" />
                                            </div>
                                            <b class="client-list">Список клиентов</b>
                                        </div>
                                        <div class="base-frame">
                                            <button class="calendar-wrapper" id="baseContainer" onclick="window.location.href='/SimplePsy/V1/session/calendar';">
                                                <div class="icon-wrapper34">
                                                    <img class="icon147" alt="" src="/images/icon-41@2x.png"/>
                                                </div>
                                                <b class="calendar">Календарь</b>
                                            </button>
                                        </div>
                                    </div>
                                    <div class="frame-parent123">
                                        <div class="notifications-wrapper">
                                            <button class="base90 fix-angle-base90" onclick="alert('Эта кнопка находится в разработке')"></button>
                                            <div class="icon-wrapper33">
                                                <img class="icon146" alt="" src="/images/icon-5.svg" />
                                            </div>
                                            <b class="notifications">Уведомления</b>
                                        </div>
                                        <div class="base-frame">
                                            <button class="calendar-wrapper" id="baseContainer" onclick="alert('Эта кнопка находится в разработке')">
                                                <div class="icon-wrapper34">
                                                    <img class="icon147" alt="" src="/images/icon-6.svg"/>
                                                </div>
                                                <b class="analytics">Аналитика</b>
                                            </button>
                                        </div>
                                        <div class="tests-wrapper">
                                            <button class="base94" onclick="window.location.href='/SimplePsy/V1/scoring/list';"></button>
                                            <b class="surveys-tests">Опросники и тесты</b>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="notification-icon">
                        <img class="icon139" alt="" src="/images/icon-1@2x.png" />
                    </div>
                    <div class="search-bar">
                        <div class="search-input4">
                            <nav class="search-input-container">
                                <div class="search-input-field">
                                    <b class="search11">Найти клиента...</b>
                                </div>
                                <div class="search-options">
                                    <div class="search-dropdown">
                                        <div class="search-dropdown-items">
                                            <a class="about-us17">Добавить клиента</a>
                                            <div class="policy-items">
                                                <a class="news10">Назначить встречу</a>
                                                <b class="user-policy11"
                                                >Добавить график нерабочих дней
                                                </b>
                                            </div>
                                        </div>
                                        <div class="frame-parent110">
                                            <button class="rectangle-parent99" id="groupButton" onclick="window.location.href='/SimplePsy/V1/specialist/customers';">
                                                <div class="frame-child125"></div>
                                                <div class="div191">Список клиентов</div>
                                            </button>
                                            <button class="rectangle-parent100" onclick="window.location.href='/SimplePsy/V1/session/sessions';">
                                                <div class="frame-child126"></div>
                                                <div class="div192">Список встреч</div>
                                            </button>
                                            <div class="rectangle-parent101" id="groupContainer" onclick="window.location.href='/SimplePsy/V1/scoring/list';">
                                                <div class="frame-child127"></div>
                                                <h3 class="h33">Опросники и тесты</h3>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="location1">
                                    <img
                                            class="icon140"
                                            alt=""
                                            src="/images/icon-2@2x.png"
                                    />

                                    <div class="location-name2">
                                        <b class="new-york10">Ростов-на-Дону</b>
                                    </div>
                                </div>
                            </nav>
                            <div class="content-right">
                                <div class="frame-parent111">
                                    <div class="filter-bar-wrapper">
                                        <div class="filter-bar">
                                            <div class="image-filter">
                                                <img
                                                        class="image-4-icon2"
                                                        loading="lazy"
                                                        alt=""
                                                        src="/images/image-4@2x.png"
                                                />

                                                <div class="image-filter-inner">
                                                    <div class="rectangle-parent102">
                                                        <div class="frame-child128"></div>
                                                        <div class="div193">А/Я</div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="filter-name">
                                                <h3 class="h34">Панель фильтрации</h3>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="component-19-parent">
                                        <ul class="component-191" id="testList">
                                            <li class="frame-parent112" th:each="scoring : ${scorings}" th:attr="data-title=${scoring.title}, data-type=${scoring.type}, data-date=${#dates.format(scoring.getDate(), 'yyyy-MM-dd')}">
                                                <div class="rectangle-parent103">
                                                    <b th:text="${#dates.format(scoring.getDate(), 'dd.MM.yyyy')}" class="test-list-dividers">20.02.2024</b>
                                                    <div class="frame-child129"></div>
                                                </div>
                                                <div class="test-list-names">
                                                    <div class="test-list-names-child"></div>
                                                    <h2 class="h23" th:text="${scoring.title}"></h2>
                                                    <div class="test-list-icons">
                                                        <button class="rectangle-parent104">
                                                            <div class="frame-child130"></div>
                                                            <b class="oprosnik" th:if="${scoring.type == T(ru.sfedu.simplepsyspecialist.entity.nested.TypeOfScoring).QUESTIONER}">Опросник</b>
                                                            <b class="b121" th:if="${scoring.type == T(ru.sfedu.simplepsyspecialist.entity.nested.TypeOfScoring).TEST}">Тест</b>
                                                        </button>
                                                    </div>
                                                </div>
                                            </li>
                                        </ul>
                                        <form class="search-bar-container-parent" id="searchForm">
                                            <div class="search-bar-container">
                                                <div class="search-bar-container-inner">
                                                    <div class="rectangle-parent117">
                                                        <div class="frame-child143"></div>
                                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="icon141">
                                                            <path d="M 10 2 C 5.589844 2 2 5.589844 2 10 C 2 14.410156 5.589844 18 10 18 C 11.785156 18 13.433594 17.40625 14.734375 16.40625 L 19.292969 20.96875 L 20.707031 19.554688 L 16.144531 14.996094 C 17.144531 13.695312 17.738281 12.046875 17.738281 10.261719 C 17.738281 5.589844 14.410156 2 10 2 Z M 10 4 C 13.300781 4 16 6.699219 16 10 C 16 13.300781 13.300781 16 10 16 C 6.699219 16 4 13.300781 4 10 C 4 6.699219 6.699219 4 10 4 Z" fill="silver"/>
                                                        </svg>
                                                        <input class="search-input-area" placeholder="Поиск" type="text" />
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="my-materials-container">
                                                <button
                                                        class="rectangle-parent120"
                                                        id="groupButton6"
                                                        onclick="window.location.href='/SimplePsy/V1/scoring/test/creation';">
                                                    <div class="frame-child146"></div>

                                                    <div class="div200">
                                                        Перейти к моим материалам
                                                    </div>
                                                </button>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <img class="icon142" alt="" src="/images/icon.svg" />
                    </div>
                </div>
                <div class="wrapper46">
                    <b class="b130">Заявки</b>
                </div>
            </div>
            <div class="application-entry">
                <div class="empty-field-parent" id="groupContainer">
                    <div class="empty-field">
                        <div class="empty-field-child"></div>
                        <b class="placeholder18">20.02.2024</b>
                    </div>
                    <div class="applicant-name-field">
                        <div class="applicant-name-field-child"></div>
                        <b class="b131">Овсянникова Юля Матвеевна</b>
                    </div>
                </div>
            </div>
        </div>
        <div class="second-application-entry">
            <div class="second-empty-field-parent" id="groupContainer">
                <div class="second-empty-field">
                    <div class="second-empty-field-child"></div>
                    <b class="second-placeholder">25.02.2024</b>
                </div>
                <div class="second-applicant-name">
                    <div class="second-applicant-name-child"></div>
                    <b class="b132">Овсянникова Юля Матвеевна</b>
                </div>
            </div>
        </div>
    </section>
    <div class="item106">
        <img class="feather-icon-chevron-up18" alt="" />
    </div>
    <div class="feedback-container-wrapper">
        <div class="feedback-container1">
            <img class="icon143" alt="" src="/images/icon-7@2x.png" />

            <div class="feedback-button1">
                <div class="feedback-label1">
                    <b class="send-feedback10">Обратная связь</b>
                </div>
                <img class="icon144" alt="" src="/images/icon-8.svg" />
            </div>
        </div>
    </div>
</div>
<div id="modal1" class="modal1">
    <div class="modal-content1">
        <span class="close-btn1">&times;</span>
        <div id="modal-body1"></div>
    </div>
</div>
<script>
    document.addEventListener('DOMContentLoaded', function() {
    const buttons = document.querySelectorAll('.item103, .item104, .item105');

    buttons.forEach(button => {
      button.addEventListener('click', function(event) {
          // Удаляем класс active у всех кнопок
          buttons.forEach(btn => btn.classList.remove('active'));

          // Добавляем класс active к нажатой кнопке
          this.classList.add('active');

          // Предотвращаем потерю фокуса после клика
          event.preventDefault();
          this.blur(); // Сбрасываем фокус
      });
    });
    });
    document.addEventListener('DOMContentLoaded', function() {
    const dateInput = document.querySelector('.xxxxxxxx');

    dateInput.addEventListener('input', function(e) {
      let value = e.target.value.replace(/[^0-9]/g, ''); // Удаляем все символы, кроме цифр

      if (e.inputType === 'deleteContentBackward') {
          // Если это действие удаления, то не вставляем точки
          return;
      }

      // Форматируем значение в формат dd.mm.yyyy
      if (value.length >= 2 && value.length <= 4) {
          value = value.replace(/^(\d{2})(\d{0,2})/, '$1.$2');
      } else if (value.length > 4) {
          value = value.replace(/^(\d{2})(\d{2})(\d{0,4})/, '$1.$2.$3');
      }

      e.target.value = value;
    });

    dateInput.addEventListener('keydown', function(e) {
      // Разрешаем удаление точек при нажатии Backspace
      if (e.key === 'Backspace' && this.value.endsWith('.')) {
          this.value = this.value.slice(0, -1);
      }
    });
    });
    document.addEventListener('DOMContentLoaded', function() {
    const dateInput = document.querySelector('.xxxxxxxx1');

    dateInput.addEventListener('input', function(e) {
      let value = e.target.value.replace(/[^0-9]/g, ''); // Удаляем все символы, кроме цифр

      if (e.inputType === 'deleteContentBackward') {
          // Если это действие удаления, то не вставляем точки
          return;
      }

      // Форматируем значение в формат dd.mm.yyyy
      if (value.length >= 2 && value.length <= 4) {
          value = value.replace(/^(\d{2})(\d{0,2})/, '$1.$2');
      } else if (value.length > 4) {
          value = value.replace(/^(\d{2})(\d{2})(\d{0,4})/, '$1.$2.$3');
      }

      e.target.value = value;
    });

    dateInput.addEventListener('keydown', function(e) {
      // Разрешаем удаление точек при нажатии Backspace
      if (e.key === 'Backspace' && this.value.endsWith('.')) {
          this.value = this.value.slice(0, -1);
      }
    });
    });

    document.getElementById('searchForm').addEventListener('submit', function(event) {
        event.preventDefault();

        // Получение значений из формы
        const searchQuery = document.querySelector('.search-input-area').value.toLowerCase();
        const selectedType = document.querySelector('.component17 .item104.active')?.innerText.toLowerCase();
        const startDate = document.querySelector('.xxxxxxxx').value;
        const endDate = document.querySelector('.xxxxxxxx1').value;

        // Преобразование дат в формат YYYY-MM-DD
        const parseDate = (dateStr) => {
            const [day, month, year] = dateStr.split('.');
            return `${year}-${month}-${day}`;
        };

        const listItems = document.querySelectorAll('#testList li');

        listItems.forEach(item => {
            const title = item.getAttribute('data-title').toLowerCase();
            const type = item.getAttribute('data-type').toLowerCase();
            const date = item.getAttribute('data-date');

            let matchesSearch = title.includes(searchQuery);
            let matchesType = !selectedType || type === selectedType;
            let matchesDate = (!startDate || date >= parseDate(startDate)) && (!endDate || date <= parseDate(endDate));

            if (matchesSearch && matchesType && matchesDate) {
                item.style.display = 'block';
            } else {
                item.style.display = 'none';
            }
        });
    });



    document.addEventListener('DOMContentLoaded', function() {
        const searchInput = document.querySelector('.search-input-area');
        const listItems = document.querySelectorAll('#testList li');

        searchInput.addEventListener('input', function() {
            const query = searchInput.value.toLowerCase();

            listItems.forEach(item => {
                const title = item.getAttribute('data-title').toLowerCase();
                const type = item.getAttribute('data-type').toLowerCase();
                const date = item.getAttribute('data-date');

                // Check if the title includes the search query
                if (title.includes(query)) {
                    item.style.display = ''; // Show the item
                } else {
                    item.style.display = 'none'; // Hide the item
                }
            });
        });
    });
    document.addEventListener('DOMContentLoaded', function() {
        const buttons = document.querySelectorAll('.item104, .item105');
        const listItems = document.querySelectorAll('#testList > li');

        buttons.forEach(button => {
            button.addEventListener('click', function() {
                // Удаляем активный класс со всех кнопок
                buttons.forEach(btn => btn.classList.remove('active'));

                // Добавляем активный класс на текущую кнопку
                this.classList.add('active');

                // Получаем тип (опрос или тест) из кнопки
                const selectedType = this.innerText.toLowerCase();

                // Фильтрация списка
                listItems.forEach(item => {
                    const itemType = item.getAttribute('data-type').toLowerCase();
                    if (itemType === selectedType) {
                        item.style.display = '';
                    } else {
                        item.style.display = 'none';
                    }
                });
            });
        });

        document.getElementById('searchForm').addEventListener('submit', function(event) {
            event.preventDefault();

            const searchQuery = document.querySelector('.search-input-area').value.toLowerCase();
            const startDate = document.querySelector('.xxxxxxxx').value;
            const endDate = document.querySelector('.xxxxxxxx1').value;

            const parseDate = (dateStr) => {
                const [day, month, year] = dateStr.split('.');
                return new Date(`${year}-${month}-${day}`);
            };

            const start = startDate ? parseDate(startDate) : null;
            const end = endDate ? parseDate(endDate) : null;

            listItems.forEach(item => {
                const itemTitle = item.getAttribute('data-title').toLowerCase();
                const itemDate = new Date(item.getAttribute('data-date'));

                let matchesQuery = itemTitle.includes(searchQuery);
                let matchesDate = true;

                if (start && end) {
                    matchesDate = itemDate >= start && itemDate <= end;
                } else if (start) {
                    matchesDate = itemDate >= start;
                } else if (end) {
                    matchesDate = itemDate <= end;
                }

                if (matchesQuery && matchesDate) {
                    item.style.display = '';
                } else {
                    item.style.display = 'none';
                }
            });
        });
    });
    // Открытие модального окна создания сессии
    document.addEventListener('DOMContentLoaded', function() {
      // Получаем элементы
      var modal = document.getElementById('modal');
      var modalBody = document.getElementById('modal-body');
      var closeBtn = document.querySelector('.close-btn');
      var appointLink = document.querySelector('.news10'); // Элемент "Назначить встречу"

      // Функция для открытия модального окна
      function openModal() {
        fetch('http://localhost:8081/SimplePsy/V1/session/session-form')
          .then(response => response.text())
          .then(data => {
            modalBody.innerHTML = data;s
            modal.style.display = 'block';
          })
          .catch(error => console.error('Ошибка загрузки:', error));
      }

      // Функция для закрытия модального окна
      function closeModal() {
        modal.style.display = 'none';
      }

      // Событие клика для открытия модального окна
      appointLink.addEventListener('click', openModal);

      // Событие клика для закрытия модального окна
      closeBtn.addEventListener('click', closeModal);
      });
</script>
</body>
</html>
