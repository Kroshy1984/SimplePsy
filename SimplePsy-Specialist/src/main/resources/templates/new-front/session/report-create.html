<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="initial-scale=1, width=device-width" />

    <link rel="stylesheet" type="text/css" th:href="@{/css/new-front/global.css}" />
    <link rel="stylesheet" type="text/css" th:href="@{/css/new-front/default-page.css}" />
    <link rel="stylesheet" type="text/css" th:href="@{/css/new-front/session/report-create.css}" />
    <link
            rel="stylesheet"
            href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700;900&display=swap"
    />
    <link
            rel="stylesheet"
            href="https://fonts.googleapis.com/css2?family=Rubik:wght@400&display=swap"
    />
</head>
<body>
<div class="div139">
    <div class="sidebar1">
        <div class="menu">
            <div class="dashboard23" id="dashboardContainer">
                <div class="base75"></div>
                <b class="dashboard24">Список клинетов</b>
                <img
                        class="icon115"
                        loading="lazy"
                        alt=""
                        src="/images/icon-3@2x.png"
                />
            </div>
            <div class="invoice15" id="invoiceContainer">
                <div class="base76"></div>
                <b class="invoice16">Уведомления</b>
                <img
                        class="icon116"
                        loading="lazy"
                        alt=""
                        src="/images/icon-5.svg"
                />
            </div>
            <div class="files8">
                <div class="base77"></div>
                <b class="files9">Аналитика</b>
                <img
                        class="icon117"
                        loading="lazy"
                        alt=""
                        src="/images/icon-6.svg"
                />
            </div>
            <div class="email3">
                <div class="base78"></div>
                <b class="calendars8">Календарь</b>
                <img
                        class="icon118"
                        loading="lazy"
                        alt=""
                        src="/images/icon-4@2x.png"
                />
            </div>

            <div class="div140" id="container">
                <div class="base79"></div>
                <b class="dashboard25">Опросники и тесты</b>
            </div>
            <div class="parent26">
                <b class="b112">Заявки</b>
                <div class="rectangle-parent87" id="groupContainer">
                    <div class="frame-child111"></div>
                    <div class="frame-child112"></div>
                    <b class="b113">Овсянникова Юля Матвеевна</b>
                    <b class="b114">20.02.2024</b>
                </div>
                <div class="rectangle-parent88" id="groupContainer1">
                    <div class="frame-child113"></div>
                    <div class="frame-child114"></div>
                    <b class="b115">Овсянникова Кирилл Матвеев</b>
                    <b class="b116">25.02.2024</b>
                </div>
            </div>
        </div>
        <div class="feedback3">
            <b class="send-feedback8">Обратная связь</b>
            <img
                    class="icon119"
                    loading="lazy"
                    alt=""
                    src="/images/icon-7@2x.png"
            />

            <img
                    class="icon120"
                    loading="lazy"
                    alt=""
                    src="/images/icon-8.svg"
            />
        </div>

        <div class="head">
            <div class="wrapper-user8">
                <img
                        class="user-icon8"
                        loading="lazy"
                        alt=""
                        src="/images/user@2x.png"
                        id="userImage"
                />
            </div>
            <b class="hello-rosalie8">Привет, Антон!</b>
            <b class="rosaliericegmailc8">rosalie.rice@gmail.com</b>
        </div>
    </div>
    <header class="head1">
        <div class="navigate">
            <a class="constructor8">Понятная практика</a>
            <div class="menu1">
                <b class="news9" id="newsText">Назначить встречу</b>
                <b class="user-policy9" id="userPolicyText"
                >Добавить график нерабочих дней
                </b>
                <b class="about-us15" id="aboutUsText">Добавить клиента</b>
            </div>
            <div class="search8">
                <b class="search9">Найти клиента...</b>
                <img
                        class="icon121"
                        loading="lazy"
                        alt=""
                        src="/images/icon-1@2x.png"
                />
            </div>
            <div class="city">
                <b class="new-york8">Ростов-на-Дону</b>
                <img
                        class="icon122"
                        loading="lazy"
                        alt=""
                        src="/images/icon-2@2x.png"
                />
            </div>
            <img
                    class="icon123"
                    loading="lazy"
                    alt=""
                    src="/images/icon@2x.png"
            />
        </div>
    </header>
    <div class="container">
        <h2>Заметка о ходе работы</h2>
        <form id="test-edit-form" th:action="@{/SimplePsy/V1/session/report}" th:object="${report}" method="post">
            <input type="hidden" th:value="${sessionId}" name="sessionId" id="sessionId">
            <div>
                <label for="requestForSessionByClient">Запрос на сессию со стороны клиента</label>
                <textarea id="requestForSessionByClient" th:text="${report.requestForSessionByClient}"
                          name="requestForSessionByClient" disabled></textarea>
            </div>

            <div>
                <label for="specialistCondition">Состояние терапевта в начале сессии</label>
                <textarea id="specialistCondition" th:text="${report.specialistCondition}"
                          name="specialistCondition" disabled></textarea>
            </div>

            <div>
                <label for="sessionTopics">Основные темы, затронутые в ходе сеанса</label>
                <textarea id="sessionTopics" th:text="${report.sessionTopics}"
                          name="sessionTopics" disabled></textarea>
            </div>

            <div>
                <label for="clientInsides">Значимые фразы, инсайты клиента</label>
                <textarea id="clientInsides" th:text="${report.clientInsides}"
                          name="clientInsides" disabled></textarea>
            </div>

            <div>
                <label for="clientsEmotions">Основные эмоции клиента</label>
                <textarea id="clientsEmotions" th:text="${report.clientsEmotions}"
                          name="clientsEmotions" disabled></textarea>
            </div>

            <div>
                <label for="specialistEmotions">Основные проявленные эмоции терапевта</label>
                <textarea id="specialistEmotions" th:text="${report.specialistEmotions}"
                          name="specialistEmotions" disabled></textarea>
            </div>

            <div>
                <label for="unmanifestedSpecialistEmotions">Непроявленные эмоции терапевта</label>
                <textarea id="unmanifestedSpecialistEmotions" th:text="${report.unmanifestedSpecialistEmotions}"
                          name="unmanifestedSpecialistEmotions" disabled></textarea>
            </div>

            <div>
                <label for="techniquesAndMethodsUsed">Применяемые техники и методы</label>
                <textarea id="techniquesAndMethodsUsed" th:text="${report.techniquesAndMethodsUsed}"
                          name="techniquesAndMethodsUsed" disabled></textarea>
            </div>

            <div>
                <label for="clientsSessionResistance">Основные препятствия и способы сопротивления процессу терапии со стороны клиента</label>
                <textarea id="clientsSessionResistance" th:text="${report.clientsSessionResistance}"
                          name="clientsSessionResistance" disabled></textarea>
            </div>

            <div>
                <label for="specialistFinalStatus">Состояние терапевта по завершению сессии</label>
                <textarea id="specialistFinalStatus" th:text="${report.specialistFinalStatus}"
                          name="specialistFinalStatus" disabled></textarea>
            </div>

            <div>
                <label for="plansForNextSession">План и/или мысли на следующую сессию</label>
                <textarea id="plansForNextSession" th:text="${report.plansForNextSession}"
                          name="plansForNextSession" disabled></textarea>
            </div>

            <div>
                <label for="difficultiesForRequestingSuperVisa">Трудности и потенциальные темы для запроса на супервизию</label>
                <textarea id="difficultiesForRequestingSuperVisa" th:text="${report.difficultiesForRequestingSuperVisa}"
                          name="difficultiesForRequestingSuperVisa" disabled></textarea>
            </div>

            <div class="frame-wrapper47">
                <div class="frame-parent71">
                    <div class="wrapper28">
                        <h2 class="h21">Проективные методики</h2>
                    </div>
                    <div class="frame-parent72" th:each="method:${projectiveMethods}">
                        <div class="rectangle-parent62">
                            <div class="frame-child71"></div>
                            <b class="b94" th:text="${method.date}"></b>
                        </div>
                        <div class="rectangle-parent63">
                            <div class="frame-child72"></div>
                            <b class="div76" th:text="${method.name}"></b>
                        </div>
                    </div>
                    <div class="rectangle-parent78">
                        <a class="add-method">+ Добавить методику</a>
                    </div>
                </div>
            </div>
            <div class="save-edit-buttons-wrapper">
                <div class="save-edit-buttons">
                    <button id="cancel" type="button" onclick="cancelButton()" class="rectangle-parent51" style="display: none;">
                        <div class="div72">Отменить</div>
                    </button>
                    <button id="edit" type="button" onclick="showInputs()" class="rectangle-parent51">
                        <div class="div72">Редактировать</div>
                    </button>
                    <button id="save" type="submit" class="rectangle-parent51" style="display: none;">
                        <div class="div72">Сохранить</div>
                    </button>
                </div>
            </div>
        </form>
    </div>
    <div id="modal" class="modal">
        <div class="modal-content">
            <span class="close-btn">&times;</span>
            <div id="modal-body"></div>
        </div>
    </div>
</div>
<script>
    var dashboardContainer = document.getElementById("dashboardContainer");
    if (dashboardContainer) {
        dashboardContainer.addEventListener("click", function (e) {
            window.location.href = "./component2.html";
        });
    }

    var invoiceContainer = document.getElementById("invoiceContainer");
    if (invoiceContainer) {
        invoiceContainer.addEventListener("click", function (e) {
            window.location.href = "./component3.html";
        });
    }

    var container = document.getElementById("container");
    if (container) {
        container.addEventListener("click", function (e) {
            window.location.href = "./component2.html";
        });
    }

    var groupContainer = document.getElementById("groupContainer");
    if (groupContainer) {
        groupContainer.addEventListener("click", function (e) {
            window.location.href = "./component6.html";
        });
    }

    var groupContainer1 = document.getElementById("groupContainer1");
    if (groupContainer1) {
        groupContainer1.addEventListener("click", function (e) {
            window.location.href = "./component6.html";
        });
    }

    var userImage = document.getElementById("userImage");
    if (userImage) {
        userImage.addEventListener("click", function (e) {
            window.location.href = "./component4.html";
        });
    }

    var newsText = document.getElementById("newsText");
    if (newsText) {
        newsText.addEventListener("click", function (e) {
            // Please sync "Модальное окно "Назначить встречу" Тип встерча = Встреча с клиентом" to the project
        });
    }

    var userPolicyText = document.getElementById("userPolicyText");
    if (userPolicyText) {
        userPolicyText.addEventListener("click", function (e) {
            // Please sync "Модальное окно "Добавить график  нерабочих дней "" to the project
        });
    }

    var aboutUsText = document.getElementById("aboutUsText");
    if (aboutUsText) {
        aboutUsText.addEventListener("click", function (e) {
            // Please sync "Модальное окно "Добавить клиента"" to the project
        });
    }
    var dashboardContainer = document.getElementById("dashboardContainer");
    if (dashboardContainer) {
        dashboardContainer.addEventListener("click", function (e) {
            window.location.href = "./component2.html";
        });
    }
    var invoiceContainer = document.getElementById("invoiceContainer");
    if (invoiceContainer) {
        invoiceContainer.addEventListener("click", function (e) {
            window.location.href = "./component3.html";
        });
    }
    var container = document.getElementById("container");
    if (container) {
        container.addEventListener("click", function (e) {
            window.location.href = "./component2.html";
        });
    }
    var groupContainer = document.getElementById("groupContainer");
    if (groupContainer) {
        groupContainer.addEventListener("click", function (e) {
            window.location.href = "./component6.html";
        });
    }
    var groupContainer1 = document.getElementById("groupContainer1");
    if (groupContainer1) {
        groupContainer1.addEventListener("click", function (e) {
            window.location.href = "./component6.html";
        });
    }
    var userImage = document.getElementById("userImage");
    if (userImage) {
        userImage.addEventListener("click", function (e) {
            window.location.href = "./component4.html";
        });
    }

    // Открытие модального окна создания проективной методики
    document.addEventListener('DOMContentLoaded', function() {
    // Получаем элементы
    var modal = document.getElementById('modal');
    var modalBody = document.getElementById('modal-body');
    var closeBtn = document.querySelector('.close-btn');
    var appointLink = document.querySelector('.add-method'); // Элемент "Добавить методику"
    var sessionId = document.getElementById('sessionId').value;

    // Функция для открытия модального окна
    function openModal() {
        fetch('http://localhost:8081/SimplePsy/V1/session/report/' + sessionId + '/projective-method')
            .then(response => response.text())
            .then(data => {
                modalBody.innerHTML = data;
                modal.style.display = 'block';
            })
            .catch(error => console.error('Ошибка загрузки:', error));
    }

    // Функция для закрытия модального окна
    function closeModal() {
        modal.style.display = 'none';
    }

    // Событие клика для открытия модального окна
    appointLink.addEventListener('click', openModal);

    // Событие клика для закрытия модального окна
    closeBtn.addEventListener('click', closeModal);
    });

    function showInputs() {
        // Находим элементы, которые нужно изменить
        var inputsToEnable = document.querySelectorAll('input[disabled]');
        var inputsFieldSetToEnable = document.querySelectorAll('textarea');
        var saveButton = document.getElementById('save');
        var editButton = document.getElementById('edit');
        var cancelButton = document.getElementById('cancel');

        // Убираем атрибут disabled у всех найденных элементов
        inputsToEnable.forEach(function (input) {
            input.removeAttribute('disabled');
        });
        inputsFieldSetToEnable.forEach(function (input) {
            input.removeAttribute('disabled');
        });

        // Показываем кнопки
        saveButton.style.display = 'inline-block';
        editButton.style.display = 'none';
        cancelButton.style.display = 'inline-block';
    }

    function cancelButton() {
        let sessionId = document.getElementById("sessionId").value;
        document.getElementById('cancel').style.display = 'none';
        window.location.href = '/SimplePsy/V1/session/report/' + sessionId;
    }
</script>
</body>
</html>
