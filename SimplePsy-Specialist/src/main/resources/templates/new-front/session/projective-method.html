<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="initial-scale=1, width=device-width" />

    <link rel="stylesheet" type="text/css" th:href="@{/css/new-front/global.css}" />
    <link rel="stylesheet" type="text/css" th:href="@{/css/new-front/session/projective-method.css}" />
    <link
            rel="stylesheet"
            href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700;900&display=swap"
    />
    <link
            rel="stylesheet"
            href="https://fonts.googleapis.com/css2?family=Rubik:wght@400&display=swap"
    />
</head>
<body>
<div class="root">
    <section class="methodology">
        <form id="sessionForm" th:object="${projectiveMethod}" th:action="@{/SimplePsy/V1/session/report/projective-method}" method="post" enctype="multipart/form-data">
            <input type="hidden" th:value="${sessionId}" name="sessionId">
            <div class="base70"></div>
            <div class="div101">Название методики</div>

            <div class="instructions-parent">
                <div class="instructions">
                    <div class="drawing-area">
                        <input type="text" th:field="*{name}" class="div102" required>
                    </div>
                </div>

                <div class="method-container">
                    <div class="image-preview-container">
                        <div class="image-preview" th:each="image : ${projectiveMethod.images}">
                            <img th:src="@{${image}}" alt="Image preview" />
                        </div>
                    </div>
                </div>

                <div class="image-input-wrapper">
                    <div class="image-input">
                        <div class="input-fields">
                            <div class="add-technique-button">
                                <label for="images" class="div105">Добавить фото</label>
                                <input type="file" id="images" accept="image/*" name="image" class="form-input" enctype="multipart/form-data">
                            </div>
                            <button type="submit" class="add-technique-button">
                                <div class="div105">Добавить методику</div>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </section>
</div>

<script>
    document.getElementById('images').addEventListener('change', function(event) {
        const previewContainer = document.getElementById('imagePreview');
        previewContainer.innerHTML = ''; // Очистить предыдущие превью

        Array.from(event.target.files).forEach(file => {
            const reader = new FileReader();
            reader.onload = function(e) {
                const img = document.createElement('img');
                img.src = e.target.result;
                img.style.width = '100px';
                img.style.margin = '5px';
                previewContainer.appendChild(img);
            };
            reader.readAsDataURL(file);
        });
    });
    var groupIcon = document.getElementById("groupIcon");
    if (groupIcon) {
        groupIcon.addEventListener("click", function (e) {
            window.location.href = "./frame.html";
        });
    }

    var groupContainer = document.getElementById("groupContainer");
    if (groupContainer) {
        groupContainer.addEventListener("click", function (e) {
            window.location.href = "./component6.html";
        });
    }
</script>
</body>
</html>