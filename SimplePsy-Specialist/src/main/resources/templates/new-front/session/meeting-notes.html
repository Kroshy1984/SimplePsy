<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="initial-scale=1, width=device-width" />

    <link rel="stylesheet" type="text/css" th:href="@{/css/new-front/global.css}" />
    <link rel="stylesheet" type="text/css" th:href="@{/css/new-front/meeting-notes.css}" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700;900&display=swap"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Rubik:wght@400&display=swap"
    />
  </head>
  <body>
  <div class="div82">
    <div class="settings2"></div>
    <div class="frame-parent81">
      <div class="frame-wrapper50">
        <div class="frame-parent82">
          <div class="icon-parent18">
            <img class="icon82" alt="" src="/images/icon@2x.png" />

            <div class="constructor-wrapper2">
              <b class="constructor7">Понятная практика</b>
            </div>
            <div class="icon-parent19">
              <img class="icon83" alt="" src="/images/icon-1@2x.png" />

              <div class="search-wrapper1">
                <b class="search7">Найти клиента...</b>
              </div>
            </div>
          </div>
          <div class="frame-wrapper51">
            <div class="about-us-container">
              <b class="about-us7">Добавить клиента</b>
              <div class="news-group">
                <b class="news10">Назначить встречу</b>
                <b class="user-policy7" id="userPolicyText"
                >Добавить график нерабочих дней
                </b>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="icon-parent20">
        <img class="icon84" alt="" src="/images/icon-2@2x.png" />

        <div class="new-york-wrapper2">
          <b class="new-york7">Ростов-на-Дону</b>
        </div>
        <img class="icon85" alt="" src="/images/icon2.svg" />
      </div>
    </div>
    <div class="item36">
      <img class="feather-icon-chevron-up6" alt="" />
    </div>
    <div class="wrapper-user-group">
      <div class="wrapper-user7">
        <img
                class="user-icon7"
                alt=""
                src="/images/user@2x.png"
                id="userImage"
        />
      </div>
      <div class="frame-wrapper52">
        <div class="frame-parent83">
          <img class="frame-child80" alt="" src="/images/group-35.svg" />

          <div class="frame-parent84">
            <div class="frame-wrapper53">
              <div class="parent11">
                <b class="b100">Встреча 6</b>
                <div class="about-us-wrapper">
                  <b class="about-us8">Дата встречи: 20.03.2024</b>
                </div>
                <div class="about-us-frame">
                  <b class="about-us9">Время встречи: с 18:00 по 20:00</b>
                </div>
              </div>
            </div>
            <div class="about-us-parent1">
              <b class="about-us10">
                <p class="p33">Тип оплаты:</p>
                <p class="p34">Безналичная</p>
              </b>
              <b class="about-us11">
                <p class="p35">Итоговая сумма:</p>
                <p class="p36">5000</p>
              </b>
            </div>
          </div>
          <div class="frame-parent85">
            <div class="about-us-parent2">
              <b class="about-us12">
                <p class="p37">Дата следующей встречи:</p>
                <p class="p38">27.03.2024</p>
              </b>
              <b class="about-us13">
                <p class="p39">Время следующей встречи:</p>
                <p class="p40">с 18:00 по 20:00</p>
              </b>
            </div>
            <div class="frame-wrapper54">
              <div class="about-us-parent3">
                <b class="about-us14">Иванов Кирилл Михайлович</b>
                <b class="news8">+79603061509</b>
                <b class="user-policy8">xollo@mail.com</b>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="frame-parent86">
      <div class="frame-wrapper55">
        <div class="frame-parent87">
          <div class="wrapper31">
            <b class="b101">Заметка о ходе работы</b>
          </div>
          <b class="hello-rosalie7">Привет, Антон!</b>
        </div>
      </div>
      <div class="frame-parent88">
        <div class="rosaliericegmailc-parent">
          <b class="rosaliericegmailc7">
            <p class="ponyatpractikagmailcom4">ponyatpractika@gmail.com</p>
          </b>
          <div class="wrapper32">
            <div class="div83">Запрос на сессию со стороны клиента</div>
          </div>
        </div>
        <div class="wrapper33">
          <div class="div84">Проективные методики</div>
        </div>
      </div>
    </div>
    <div class="frame-parent89">
      <div class="frame-parent90">
        <div class="frame-wrapper56">
          <div class="frame-parent91">
            <div class="frame-wrapper73">
              <div class="frame-parent122">
                <div class="frame-parent123">
                  <div class="client-list-wrapper">
                    <button class="base90" onclick="window.location.href='/SimplePsy/V1/specialist/customers';"></button>
                    <div class="icon-wrapper33">
                      <img class="icon146" alt="" src="/images/icon-3@2x.png" />
                    </div>
                    <b class="client-list">Список клиентов</b>
                  </div>
                  <div class="base-frame">
                    <button class="calendar-wrapper" id="baseContainer" onclick="window.location.href='/SimplePsy/V1/session/calendar';">
                      <div class="icon-wrapper34">
                        <img class="icon147" alt="" src="/images/icon-41@2x.png"/>
                      </div>
                      <b class="calendar">Календарь</b>
                    </button>
                  </div>
                </div>
                <div class="frame-parent123">
                  <div class="notifications-wrapper">
                    <button class="base90 fix-angle-base90" onclick="alert('Эта кнопка находится в разработке')"></button>
                    <div class="icon-wrapper33">
                      <img class="icon146" alt="" src="/images/icon-5.svg" />
                    </div>
                    <b class="notifications">Уведомления</b>
                  </div>
                  <div class="base-frame">
                    <button class="calendar-wrapper" id="baseContainer" onclick="alert('Эта кнопка находится в разработке')">
                      <div class="icon-wrapper34">
                        <img class="icon147" alt="" src="/images/icon-6.svg"/>
                      </div>
                      <b class="analytics">Аналитика</b>
                    </button>
                  </div>
                  <div class="tests-wrapper">
                    <button class="base94" onclick="window.location.href='/SimplePsy/V1/scoring/list';"></button>
                    <b class="surveys-tests">Опросники и тесты</b>
                  </div>
                </div>
              </div>
            </div>
            <div class="frame-parent92">
              <div class="frame-wrapper58">
                <div class="frame-parent93" id="groupContainer">
                  <div class="wrapper34">
                    <b class="b102">Заявки</b>
                  </div>
                  <div class="frame-parent94">
                    <div class="rectangle-parent71">
                      <div class="frame-child81"></div>
                      <b class="b103">20.02.2024</b>
                    </div>
                    <div class="rectangle-parent72">
                      <div class="frame-child82"></div>
                      <b class="b104">Овсянникова Юля Матвеевна</b>
                    </div>
                  </div>
                  <div class="frame-parent95">
                    <div class="rectangle-parent73">
                      <div class="frame-child83"></div>
                      <b class="b105">25.02.2024</b>
                    </div>
                    <div class="rectangle-parent74">
                      <div class="frame-child84"></div>
                      <b class="b106">Овсянникова Юля Матвеевна</b>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="frame-parent96">
          <div class="rectangle-parent75">
            <div class="frame-child85"></div>
            <div class="parent12">
              <div class="div85">Состояние терапевта в начале сессии</div>
              <div class="frame-child86"></div>
            </div>
            <div class="parent13">
              <div class="div86">Основные темы, затронутые в ходе сеанса</div>
              <div class="frame-child87"></div>
            </div>
            <div class="parent14">
              <div class="div87">Значимые фразы, инсайты клиента</div>
              <div class="frame-child88"></div>
            </div>
            <div class="parent15">
              <div class="div88">Основные эмоции клиента</div>
              <div class="frame-child89"></div>
            </div>
            <div class="parent16">
              <div class="div89">Основные проявленные эмоции терапевта</div>
              <div class="frame-child90"></div>
            </div>
            <div class="parent17">
              <div class="div90">Непроявленные эмоции терапевта</div>
              <div class="frame-child91"></div>
            </div>
            <div class="parent18">
              <div class="div91">Применяемые техники и методы</div>
              <div class="frame-child92"></div>
            </div>
            <div class="parent19">
              <div class="div92">
                Основные препятствия и способы сопротивления процессу терапии
                со стороны клиенты
              </div>
              <div class="frame-child93"></div>
            </div>
            <div class="parent20">
              <div class="div93">
                Состояние терапевта по завершению сессии
              </div>
              <div class="frame-child94"></div>
            </div>
            <div class="parent21">
              <div class="div94">План и/или мысли на следующую сессию</div>
              <div class="frame-child95"></div>
            </div>
            <div class="div95">
              Трудности и потенциальные темы для запроса на супервизию
            </div>
          </div>
          <div class="frame-wrapper59">
            <div class="frame-parent97">
              <div class="frame-wrapper60">
                <div class="frame-parent98">
                  <div class="frame-parent99" id="groupContainer">
                    <div class="rectangle-parent76">
                      <div class="frame-child96"></div>
                      <b class="b107">20.02.2024</b>
                    </div>
                    <div class="rectangle-parent77">
                      <div class="frame-child97"></div>
                      <div class="div96">Дом, дерево, человек</div>
                    </div>
                  </div>
                  <div class="frame-wrapper61">
                    <div class="rectangle-parent78" id="groupContainer">
                      <div class="frame-child98"></div>
                      <div class="div97">+ Добавить методику</div>
                    </div>
                  </div>
                </div>
              </div>
              <div class="frame-parent100">
                <div class="wrapper35">
                  <div class="div98">Дополнительная заметка</div>
                </div>
                <div class="frame-child99"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="frame-wrapper62">
        <div class="frame-parent101">
          <div class="frame-wrapper63">
            <div class="icon-parent21">
              <img class="icon89" alt="" src="/images/icon-7@2x.png" />

              <div class="frame-parent102">
                <div class="send-feedback-wrapper5">
                  <b class="send-feedback7">Обратная связь</b>
                </div>
                <img class="icon90" alt="" src="/images/icon-8.svg" />
              </div>
            </div>
          </div>
          <div class="rectangle-parent79">
            <div class="frame-child100"></div>
            <div class="frame-wrapper64">
              <div class="frame-parent103">
                <div class="rectangle-parent80">
                  <div class="frame-child101"></div>
                  <div class="div99">Редактировать</div>
                </div>
                <div class="rectangle-parent81">
                  <div class="frame-child102"></div>
                  <div class="div100">Сохранить</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div id="modal" class="modal">
    <div class="modal-content">
      <span class="close-btn">&times;</span>
      <div id="modal-body"></div>
    </div>
  </div>
  <script>
    var emailContainer = document.getElementById("emailContainer");
    if (emailContainer) {
      emailContainer.addEventListener("click", function (e) {
        window.location.href = "./frame.html";
      });
    }

    var userPolicyText = document.getElementById("userPolicyText");
    if (userPolicyText) {
      userPolicyText.addEventListener("click", function (e) {
        // Please sync "Модальное окно "Добавить график  нерабочих дней "" to the project
      });
    }

    var userImage = document.getElementById("userImage");
    if (userImage) {
      userImage.addEventListener("click", function (e) {
        window.location.href = "./component4.html";
      });
    }

    var dashboardContainer = document.getElementById("dashboardContainer");
    if (dashboardContainer) {
      dashboardContainer.addEventListener("click", function (e) {
        window.location.href = "./component2.html";
      });
    }

    var invoiceContainer = document.getElementById("invoiceContainer");
    if (invoiceContainer) {
      invoiceContainer.addEventListener("click", function (e) {
        window.location.href = "./component3.html";
      });
    }

    var groupContainer = document.getElementById("groupContainer");
    if (groupContainer) {
      groupContainer.addEventListener("click", function (e) {
        window.location.href = "./component12.html";
      });
    }

    var groupContainer = document.getElementById("groupContainer");
    if (groupContainer) {
      groupContainer.addEventListener("click", function (e) {
        // Please sync "Модальное окно "Добавить методику"" to the project
      });
    }
    var holidayBtn = document.querySelector('.user-policy7');
    // Открытие модального окна создания сессии
    document.addEventListener('DOMContentLoaded', function() {
    // Получаем элементы
    var modal = document.getElementById('modal');
    var modalBody = document.getElementById('modal-body');
    var closeBtn = document.querySelector('.close-btn');
    var appointLink = document.querySelector('.news10'); // Элемент "Назначить встречу"


    // Функция для открытия модального окна
      function openModal() {
        fetch('http://localhost:8081/SimplePsy/V1/session/session-form')
                .then(response => response.text())
                .then(data => {
                  modalBody.innerHTML = data;
                  modal.style.display = 'block';
                })
                .catch(error => console.error('Ошибка загрузки:', error));

        fetch('/SimplePsy/V1/client/findAll')
                .then(response => response.json())
                .then(clients => {
                  const dataList = document.getElementById('clientsList');
                  dataList.innerHTML = '';

                  const script = document.createElement('script');
                  script.id = 'dynamic-script';
                  script.textContent = `
  document.getElementById('clientInput').addEventListener('change', function() {
    const selectedOption = Array.from(document.getElementById('clientsList').options).find(option => option.value === this.value);
    if (selectedOption) {
      const clientId = selectedOption.getAttribute('data-id');
      document.getElementById('clientId').value = clientId; // устанавливаем значение скрытого поля
    }
  });
  // Функция для валидации формы
  function validateForm() {
    const clientId = document.getElementById('clientId').value;
    if (!clientId) {
      document.getElementById('error-message').style.display = 'block'; // Показываем сообщение об ошибке
      return false; // Отменяем отправку формы
    }
    return true; // Разрешаем отправку формы, если значение есть
  }

  document.getElementById('clientInput').addEventListener('change', function() {
    const selectedOption = Array.from(document.getElementById('clientsList').options)
            .find(option => option.value === this.value);
    if (selectedOption) {
      const clientId = selectedOption.getAttribute('data-id');
      document.getElementById('clientId').value = clientId; // устанавливаем значение скрытого поля
      document.getElementById('error-message').style.display = 'none'; // Скрываем сообщение об ошибке при успешном выборе клиента
    } else {
      document.getElementById('clientId').value = ''; // Очищаем скрытое поле, если выбранного клиента нет в списке
    }
  });`;
                  document.body.appendChild(script);
                  clients.forEach(client => {
                    const option = document.createElement('option');
                    option.value = client.name;
                    option.setAttribute('data-id', client.id);
                    dataList.appendChild(option);
                  });
                })
                .catch(error => console.error('Ошибка:', error));


      }

      // Функция для закрытия модального окна
      function closeModal() {
        modal.style.display = 'none';
        const script = document.getElementById('dynamic-script');
        if (script) {
          script.remove();
          console.log('Скрипт удалён');
        } else {
          console.log('Скрипт не найден');
        }
      }

    // Событие клика для открытия модального окна
    appointLink.addEventListener('click', openModal);

    // Событие клика для закрытия модального окна
    closeBtn.addEventListener('click', closeModal);
    });

    var  addClientBtn = document.querySelector('.about-us7');
    addClientBtn.addEventListener('click', () =>
    {
      window.location.href = '/SimplePsy/V1/customer/customer-form';
    });

    holidayBtn.addEventListener('click', openHolidayModal);
    function openHolidayModal()
    {
      const modal = document.getElementById("modal");
      const modalBody = document.getElementById("modal-body");

      fetch('/SimplePsy/V1/session/holiday')
              .then(response => response.text())
              .then(html => {
                modalBody.innerHTML = html;
                modal.style.display = "block";

                // Добавляем обработчик закрытия модального окна
                document.querySelector('.close-modal').onclick = function() {
                  modal.style.display = "none";
                };
              })
              .catch(error => {
                console.error('Error loading modal content:', error);
              });
    }
  </script>
  </body>
</html>
